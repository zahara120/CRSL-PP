<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List Product</title>
</head>
<body>
    <%- include('components/navbar') %>
    <h1>List Product</h1>
    <div>
        <form action="/products" method="get">
            <input type="search" name="search" id="search">
            <button type="submit">search</button>
        </form>
    </div>
    <div>
        <% categories.forEach(el => { %>
            <a href="/products?category=<%= el.id %>"><%= el.name %></a>
        <% }) %>
    </div>
    <table>
        <thead>
            <tr>
                <th>no</th>
                <th>id</th>
                <th>name</th>
                <th>description</th>
                <th>price</th>
                <th>stock</th>
                <th>category_id</th>
                <th>action</th>
            </tr>
        </thead>
        <tbody>
            <% data.forEach((el, index) => { %>
                <tr>
                    <td><%= index+1 %></td>
                    <td><%= el.id %></td>
                    <td><%= el.name %></td>
                    <td><%= el.description %></td>
                    <td><%= formatCurrency(el.price) %></td>
                    <td><%= el.stock %></td>
                    <td><%= el.Category.name %></td>
                    <td>
                        <% if (locals.user.role === 'admin') { %>
                            <a href="/products/<%= el.id %>/edit">edit</a>
                            <a href="/products/<%= el.id %>/delete">delete</a>
                        <% } %>
                        <a href="/products/<%= el.id %>/detail">detail</a>
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</body>
</html>